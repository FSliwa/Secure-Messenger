â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ðŸš€ AKTUALIZACJA SERWERA DO NAJNOWSZEJ WERSJI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PoÅ‚Ä…cz siÄ™ z serwerem przez Web Console i wykonaj:

KOPIUJ I WKLEJAJ POJEDYNCZO (po kolei):


# 1. PrzejdÅº do katalogu aplikacji
cd /opt/Secure-Messenger


# 2. SprawdÅº obecnÄ… wersjÄ™
git log --oneline -1


# 3. Pobierz najnowsze zmiany z GitHub
git pull origin main


# 4. SprawdÅº co siÄ™ zmieniÅ‚o
git log --oneline -5


# 5. Upewnij siÄ™ Å¼e plik .env.production istnieje
cat .env.production


# 6. JeÅ›li plik nie istnieje, utwÃ³rz go:
cat > .env.production << 'EOF'
NODE_ENV=production
VITE_SUPABASE_URL=https://fyxmppbrealxwnstuzuk.supabase.co
VITE_SUPABASE_KEY=sb_publishable_Jau8JdiOFfVKQOM1svLxMQ_9-sBqnKc
SUPABASE_SERVICE_KEY=sb_secret_ek5NhQ2-BVZd-7yHw3RYhw_-sx2qOse
PORT=3000
HOST=0.0.0.0
CORS_ORIGIN=https://secure-messenger.info,http://5.22.223.49
LOG_LEVEL=info
EOF


# 7. Zatrzymaj aplikacjÄ™
docker-compose -f deployment/docker/docker-compose.production.yml down


# 8. Przebuduj aplikacjÄ™ (uÅ¼ywa najnowszego kodu)
docker-compose -f deployment/docker/docker-compose.production.yml build --no-cache


# 9. Uruchom aplikacjÄ™
docker-compose -f deployment/docker/docker-compose.production.yml up -d


# 10. SprawdÅº status (powinien pokazaÄ‡ dziaÅ‚ajÄ…cy kontener)
docker ps


# 11. SprawdÅº logi (nie powinno byÄ‡ bÅ‚Ä™dÃ³w)
docker logs secure-messenger-app --tail 50


# 12. Test HTTP
curl -I http://localhost/


# 13. Test zewnÄ™trzny
curl -I http://5.22.223.49/


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  âœ… WERYFIKACJA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OtwÃ³rz w przeglÄ…darce:
- http://5.22.223.49

PowinieneÅ› zobaczyÄ‡ zaktualizowanÄ… aplikacjÄ™!


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ðŸ”’ OPCJONALNIE: Konfiguracja SSL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

JeÅ›li chcesz teraz skonfigurowaÄ‡ HTTPS:

# Wygeneruj certyfikat (ZMIEÅƒ EMAIL!)
sudo certbot certonly --standalone --non-interactive --agree-tos --email TWOJ-EMAIL@gmail.com -d secure-messenger.info -d www.secure-messenger.info

# Skonfiguruj SSL
sudo bash deployment/scripts/setup-ssl.sh

# Restart
docker-compose -f deployment/docker/docker-compose.production.yml restart


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ðŸ“ NOTATKI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Najnowsza wersja zawiera:
- Wsparcie dla nowych kluczy Supabase (sb_publishable_*, sb_secret_*)
- Poprawiony trigger handle_new_user
- Tabela encryption_keys
- Konfiguracja SSL
- Wszystkie naprawy bÅ‚Ä™dÃ³w

JeÅ›li pojawiÄ… siÄ™ bÅ‚Ä™dy, sprawdÅº:
docker logs secure-messenger-app -f
